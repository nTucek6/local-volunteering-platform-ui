<div class="main-container">
  <h1 class="title">{{ "new_event.title" | translate }}</h1>
  <form (ngSubmit)="formSubmit()" id="new-event-form" autocomplete="auto">
    <mat-form-field class="form-group">
      <mat-label>{{ "new_event.category" | translate }}</mat-label>
      <mat-select
        [(ngModel)]="selectedCategory"
        name="category"
        [ngModelOptions]="{ standalone: true }"
      >
        <ng-container *ngFor="let cat of eventCategories">
          <mat-option [value]="cat">{{
            "event_category." + cat | translate | titlecase
          }}</mat-option>
        </ng-container>
      </mat-select>
    </mat-form-field>

    <mat-form-field class="form-group">
      <mat-label>{{ "new_event.title_label" | translate }}</mat-label>
      <input
        type="text"
        matInput
        name="title"
        [placeholder]="'new_event.title_label' | translate"
        [(ngModel)]="selectedTitle"
        autocomplete="auto"
        [ngModelOptions]="{ standalone: true }"
      />
    </mat-form-field>

    <mat-form-field class="form-group">
      <mat-label>{{ "new_event.description" | translate }}</mat-label>
      <textarea
        matInput
        cdkTextareaAutosize
        #autosize="cdkTextareaAutosize"
        name="description"
        [placeholder]="'new_event.description' | translate"
        [(ngModel)]="selectedDescription"
        autocomplete="auto"
        [ngModelOptions]="{ standalone: true }"
      ></textarea>
    </mat-form-field>

    <mat-form-field class="form-group">
      <mat-label>{{ "new_event.details" | translate }}</mat-label>
      <textarea
        matInput
        cdkTextareaAutosize
        #autosize="cdkTextareaAutosize"
        name="details"
        [placeholder]="'new_event.details' | translate"
        [(ngModel)]="selectedDetails"
        autocomplete="auto"
        [ngModelOptions]="{ standalone: true }"
      ></textarea>
    </mat-form-field>

    <mat-form-field class="form-group">
      <mat-label>{{ "new_event.location" | translate }}</mat-label>
      <input
        type="text"
        matInput
        name="location"
        [placeholder]="'new_event.location' | translate"
        [(ngModel)]="selectedLocation"
        autocomplete="auto"
        [ngModelOptions]="{ standalone: true }"
      />
    </mat-form-field>

    <mat-form-field class="form-group">
      <mat-label>{{ "new_event.address" | translate }}</mat-label>
      <input
        type="text"
        matInput
        name="address"
        [placeholder]="'new_event.address' | translate"
        [(ngModel)]="selectedAddress"
        autocomplete="auto"
        [ngModelOptions]="{ standalone: true }"
      />
    </mat-form-field>

    <mat-form-field class="form-group">
      <mat-label>{{ "new_event.choose_date" | translate }}</mat-label>
      <input
        name="date"
        matInput
        [matDatepicker]="picker"
        [(ngModel)]="selectedDate"
        [ngModelOptions]="{ standalone: true }"
      />
      <mat-datepicker-toggle
        matIconSuffix
        [for]="picker"
      ></mat-datepicker-toggle>
      <mat-datepicker #picker></mat-datepicker>
    </mat-form-field>

    <mat-form-field class="form-group">
      <mat-label>{{ "new_event.meeting_time" | translate }}</mat-label>
      <input
        name="time"
        matInput
        [matTimepicker]="timepicker"
        [(ngModel)]="selectedDate"
      />
      <mat-timepicker #timepicker></mat-timepicker>
      <mat-timepicker-toggle
        [for]="timepicker"
        matSuffix
      ></mat-timepicker-toggle>
    </mat-form-field>

    <div class="form-group input-image">
      <input
        type="file"
        name="image"
        [placeholder]="'new_event.upload_images' | translate"
        (change)="onFileSelected($event)"
        multiple
        accept="image/*"
        autocomplete="auto"
      />
    </div>

    <button type="submit" class="save-btn" mat-button>
      {{ "new_event.create" | translate }}
    </button>
  </form>

  <div
    id="image-preview"
    [ngStyle]="{ 'margin-bottom': selectedImages.length > 0 ? '200px' : '0' }"
  >
    <ng-container *ngFor="let path of imagePreviews; let i = index">
      <img
        [src]="path"
        alt="{{ 'new_event.image_preview_alt' | translate }}"
        (click)="removeImage(i)"
      />
    </ng-container>
  </div>
</div>
